
# ğŸï¸ A-SOUL è‡ªåŠ¨åŒ–åˆ‡ç‰‡å·¥å…· (Asoul-Auto-Clip)

![FFmpeg](https://img.shields.io/badge/Dependency-FFmpeg-green)
![License](https://img.shields.io/badge/license-MIT-orange)
![Status](https://img.shields.io/badge/Status-Stable-brightgreen)

> **æé€Ÿåˆ‡ç‰‡ï¼Œè§£æ”¾åŒæ‰‹ï¼ä¸“ä¸º A-SOUL åˆ‡ç‰‡è®¾è®¡çš„è‡ªåŠ¨åŒ–ç”Ÿäº§çº¿ã€‚**
> 
> ä»…éœ€ **5-10åˆ†é’Ÿ** é…ç½®ï¼Œå³å¯ä»ä¸¤å°æ—¶çš„ç›´æ’­ä¸­è‡ªåŠ¨æå– **10-20ä¸ª** ç²¾å½©ç‰‡æ®µã€‚è‡ªåŠ¨å¯¹é½æ—¶é—´è½´ã€ç”Ÿæˆå¤šé£æ ¼å°é¢ã€å†…åµŒå­—å¹•åŠæ ‡é¢˜ï¼Œç›´æ¥ç”Ÿæˆå¯æŠ•ç¨¿è§†é¢‘ï¼

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

*   **âš¡ æé€Ÿå¤„ç†**ï¼šç›¸æ¯”æ‰‹åŠ¨åˆ‡ç‰‡ï¼ˆè€—æ—¶çº¦2å°æ—¶ï¼‰ï¼Œæœ¬å·¥å…·å¯èŠ‚çœ **90%** ä»¥ä¸Šçš„æ—¶é—´ã€‚
*   **ğŸ§  åŒé‡ç­–ç•¥**ï¼š
    *   **LLM è¯­ä¹‰åˆ†æ**ï¼šåˆ©ç”¨ GPT-5/Claude/Gemini/è±†åŒ… åˆ†æå­—å¹•ï¼Œç²¾å‡†æå–å¯¹è¯æ¢—ã€‚
    *   **å¼¹å¹•çƒ­åº¦åˆ†æ**ï¼šåŸºäºè§‚ä¼—çœŸå®ååº”ï¼ˆ"ç»·"ã€"?"ã€"å“ˆå“ˆå“ˆ"ï¼‰å®šä½é«˜å…‰æ—¶åˆ»ã€‚
*   **ğŸ¨ å…¨è‡ªåŠ¨åŒ…è£…**ï¼šè‡ªåŠ¨å‰ªè¾‘è§†é¢‘ã€åµŒå…¥å­—å¹•ã€ç”Ÿæˆæ ‡é¢˜ã€ç”Ÿæˆå¤šç§é£æ ¼çš„å°é¢å›¾ã€‚
*   **ğŸ› ï¸ æ™ºèƒ½è¾…åŠ©**ï¼šå†…ç½® ASR æ–‡æœ¬çº é”™å­—å…¸ã€å®˜æ–¹/éå®˜æ–¹å½•æ’­æ—¶é—´è½´å¯¹é½å·¥å…·ã€‚

---

## ğŸ“¦ å®‰è£…ä¸ç¯å¢ƒé…ç½®

åœ¨è¿è¡Œä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ã€‚

### 1. ç³»ç»Ÿä¾èµ– (å¿…é¡»å®‰è£…)
æœ¬é¡¹ç›®ä¾èµ– **FFmpeg** è¿›è¡Œè§†é¢‘å¤„ç†ï¼Œè¯·åŠ¡å¿…å®‰è£…å¹¶æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚

*   **Windows**: [ä¸‹è½½ FFmpeg](https://ffmpeg.org/download.html) -> è§£å‹ -> å°† `bin` ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ `Path` ä¸­ï¼Œè¯¦ç»†æ•™ç¨‹å‚è€ƒï¼š[FFmpeg è¶…çº§è¯¦ç»†å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼ˆWindows ç³»ç»Ÿï¼‰](https://blog.csdn.net/Natsuago/article/details/143231558)ã€‚
*   **Mac**: `brew install ffmpeg`
*   **Linux**: `sudo apt install ffmpeg`

éªŒè¯å®‰è£…ï¼šåœ¨ç»ˆç«¯è¾“å…¥ `ffmpeg -version` ä¸æŠ¥é”™å³ä¸ºæˆåŠŸã€‚

### 2. Python ä¾èµ–
```bash
git clone https://github.com/dayanggo/ASoulAutoClip.git
cd ASoulAutoClip
pip install -r requirements.txt
```

### 3. åˆ›å»ºç›®å½•

- åœ¨ä½¿ç”¨è¯¥é¡¹ç›®ä¹‹å‰ï¼Œéœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `workspace` ç›®å½•ï¼Œç„¶ååœ¨`workspace`ç›®å½•ä¸‹é¢åˆ›å»º`video_input`ç›®å½•å’Œ`clip_output`ç›®å½•ã€‚
- åœ¨é¡¹ç›®çš„`assets`ç›®å½•ä¸‹ï¼Œåˆ›å»º`font`ç›®å½•ï¼Œå­˜æ”¾åˆ¶ä½œè§†é¢‘ä½¿ç”¨çš„å­—ä½“ã€‚

### 4. å­—ä½“é…ç½®
é¡¹ç›®é»˜è®¤ä½¿ç”¨**è‡ªå®šä¹‰å­—ä½“**ç”Ÿæˆå°é¢å’Œå­—å¹•ã€‚
*   å°†ä½ å–œæ¬¢çš„å­—ä½“æ–‡ä»¶ï¼ˆ`.ttf`, `.otf`ï¼‰æ”¾å…¥ `assets/font/` ç›®å½•ï¼Œå¹¶åœ¨è‡ªå·±ç”µè„‘ä¸Šå®‰è£…è¯¥å­—ä½“ã€‚
*   ä¿®æ”¹ `Auto_clip.py` (ä¸»ç¨‹åº) ä¸­çš„ `font_path` ä¸ºä½ çš„å­—ä½“åç§°ï¼Œ`font_family`ä¸ºå­—ä½“å®¶æ—åç§°ï¼ˆå¯ä»¥é€šè¿‡ `utils/get_font_family_name.py` è·å–ï¼‰ã€‚

å­—ä½“æ¨èå®‰è£…ï¼š
- [æ–‡æ‚¦æ–°é’å¹´ä½“](https://www.fonts.net.cn/font-32331338415.html)
- [ä¸Šé¦–çŠ¶å…ƒä½“](https://www.fonts.net.cn/font-40031585739.html)
- [è‡ªç”±ä½“](https://www.fonts.net.cn/font-31793233330.html)

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
ASoulAutoClip/
â”œâ”€â”€ assets/                       # é™æ€èµ„æº (å­—ä½“ã€å›¾ç‰‡ç´ æ)
â”œâ”€â”€ danmu_method/                 # [æ ¸å¿ƒ] å¼¹å¹•åˆ†æç®—æ³•æ¨¡å—
â”œâ”€â”€ prompt_method/                # [æ ¸å¿ƒ] LLM æç¤ºè¯æ¨¡æ¿
â”œâ”€â”€ utils/                        # å·¥å…·ç®±
â”‚   â”œâ”€â”€ ASRCorrector.py           # å­—å¹•çº é”™å·¥å…·
â”‚   â”œâ”€â”€ get_danmu.py              # å¼¹å¹•ä¸‹è½½å™¨
â”‚   â”œâ”€â”€ edit_data_source.py       # æ—¶é—´è½´å¯¹é½å·¥å…·
â”‚   â”œâ”€â”€ get_font_family_name.py   # è·å–å­—ä½“å®¶æ—åç§°ï¼Œç”¨äºå¡«å…¥ä¸»ç¨‹åº
|   â””â”€â”€ asr_dict.txt              # å­—å¹•çº é”™å­—å…¸
â”œâ”€â”€ workspace/                    # å·¥ä½œåŒº
â”‚   â”œâ”€â”€ clip_output/              # å‰ªè¾‘ç‰‡æ®µè¾“å‡º
|   â””â”€â”€ video_input/              # æ”¾å…¥è§†é¢‘ã€å­—å¹•ã€å¼¹å¹•æ–‡ä»¶ç­‰ç´ æ
â”œâ”€â”€ Auto_clip.py                  # ğŸš€ ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ Data_source.txt               # [æ•°æ®] å‰ªè¾‘ç‰‡æ®µå…ƒæ•°æ®
â”œâ”€â”€ requirements.txt              # Python ä¾èµ–
â””â”€â”€ README.md                     # è¯´æ˜æ–‡æ¡£
```

---

## ğŸš€ ä½¿ç”¨æŒ‡å— (Workflow)

### ç¬¬ä¸€æ­¥ï¼šç´ æå‡†å¤‡

è¿è¡Œå·¥å…·å‰ï¼Œè¯·ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å·²å°±ä½ï¼š
1.  **å½•æ’­è§†é¢‘æ–‡ä»¶**ï¼ˆå®Œæ•´è§†é¢‘ï¼‰
2.  **å­—å¹•æ–‡ä»¶**ï¼ˆ`.srt` æˆ– `.txt`ï¼‰
3.  **å…ƒæ•°æ®æ–‡ä»¶**ï¼ˆ`Data_source.txt`ï¼‰

#### 1. è§†é¢‘ä¸‹è½½
æ¨èä½¿ç”¨ä»¥ä¸‹å·¥å…·è·å– Bilibili å½•æ’­è§†é¢‘ï¼š
- [SnapAny](https://snapany.com/zh/bilibili) / [æ•ˆç‡åŠ](https://www.xiaolvfang.com/) / [ShowBL](https://www.showbl.com/lab/bilibili/) / [kedou](https://www.kedou.life/extract/bilibili)
- æˆ–è€…ä½¿ç”¨ [Bç«™å½•æ’­å§¬](https://github.com/Bililive/BililiveRecorder) è‡ªè¡Œå½•åˆ¶ã€‚

#### 2. å­—å¹•ä¸‹è½½ä¸å¤„ç†
æ¨èä½¿ç”¨ **vCaptions** æ’ä»¶ä¸‹è½½å­—å¹•ï¼š
- [Edge æ’ä»¶ä¸‹è½½](https://microsoftedge.microsoft.com/addons/detail/vcaptions-%E7%BB%99%E4%BB%BB%E6%84%8F%E7%BD%91%E7%AB%99%E8%A7%86%E9%A2%91%E6%B7%BB%E5%8A%A0%E5%AD%97%E5%B9%95%E5%88%97%E8%A1%A8/lignnlhlpiefmcjkdkmfjdckhlaiajan?hl=zh-CN)
- [Chrome æ’ä»¶ä¸‹è½½](https://chromewebstore.google.com/detail/vcaptions-%E7%BB%99%E4%BB%BB%E6%84%8F%E7%BD%91%E7%AB%99%E8%A7%86%E9%A2%91%E6%B7%BB%E5%8A%A0%E5%AD%97%E5%B9%95%E5%88%97%E8%A1%A8/bciglihaegkdhoogebcdblfhppoilclp?hl=zh-CN&utm_source=ext_sidebar)

æˆ–è€…ä½¿ç”¨åœ¨çº¿æå–ï¼š[é£é±¼å¤šå­—å¹•å·¥å…·](https://www.feiyudo.com/caption/subtitle/bilibili)

> **âš ï¸ æ³¨æ„**ï¼šè·å–å­—å¹•åï¼Œè¯·åŠ¡å¿…è¿è¡Œ `utils/ASRCorrector.py` å¯¹å­—å¹•è¿›è¡Œè‡ªåŠ¨çº é”™ï¼Œä»¥æé«˜è¯†åˆ«å‡†ç¡®ç‡ã€‚

---

### ç¬¬äºŒæ­¥ï¼šç”Ÿæˆé«˜å…‰ç‰‡æ®µå…ƒæ•°æ® (æ ¸å¿ƒ)

ä½ éœ€è¦å°†é«˜å…‰æ—¶åˆ»çš„å…ƒæ•°æ®å¡«å…¥ `Data_source.txt`ã€‚æœ¬ä»“åº“æä¾›ä¸¤ç§è‡ªåŠ¨åŒ–ç”Ÿæˆæ–¹æ³•ï¼š

#### ğŸ“Š æ–¹æ³•å¯¹æ¯”

| ç‰¹æ€§ | æ–¹æ³•ä¸€ï¼šLLM æç¤ºè¯æ³• | æ–¹æ³•äºŒï¼šå¼¹å¹•çƒ­åº¦æ³• |
| :--- | :--- | :--- |
| **åŸç†** | ä¾é ç›´æ’­å­—å¹• + å¤§æ¨¡å‹è¯­ä¹‰ç†è§£ | ä¾é å¼¹å¹•å¯†åº¦æ³¢å³° + å­—å¹•è¾…åŠ© |
| **ä¼˜ç‚¹** | **æ— éœ€æ¥å£**ï¼Œå¯åˆ©ç”¨ Gemini/GPT é«˜çº§æ¨ç†èƒ½åŠ›ï¼›<br>é€‚ç”¨èŒƒå›´å¹¿ï¼ˆä»»æ„è§†é¢‘ï¼‰ã€‚ | **å®¢è§‚çœŸå®**ï¼Œåæ˜ è§‚ä¼—å®æ—¶ååº”ï¼›<br>å…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨æé—®ã€‚ |
| **ç¼ºç‚¹** | ä¾èµ–å­—å¹•è´¨é‡ï¼›æ— æ³•è¯†åˆ«çº¯ç”»é¢/åŠ¨ä½œæ¢—ã€‚ | å¿…é¡»æœ‰å¤§é‡å¼¹å¹•ï¼ˆä»…é™å®˜æ–¹å½•æ’­ï¼‰ï¼›<br>éœ€è¦è°ƒç”¨ LLM API (æ¶ˆè€— Token)ã€‚ |
| **é€‚ç”¨åœºæ™¯**| å­—å¹•æ¸…æ™°ã€å¯¹è¯ä¸ºä¸»çš„ç›´æ’­ | å®˜æ–¹å¤§å‹ç›´æ’­ã€å¼¹å¹•äº’åŠ¨å¤šçš„åœºæ¬¡ |

#### ğŸ“¥ `Data_source.txt` æ•°æ®æ ¼å¼ç¤ºä¾‹
æ— è®ºä½¿ç”¨å“ªç§æ–¹æ³•ï¼Œæœ€ç»ˆå¡«å…¥çš„æ•°æ®æ ¼å¼å¿…é¡»å¦‚ä¸‹ï¼š

```json
[
  {
    "timestamp": "00:49:52-00:50:16",
    "title": "ç ´é˜²äº†ï¼å˜‰ç„¶è‡ªæ›æ¼”å”±ä¼šè¹¦è¿ªå› èº«é«˜å¤ªçŸ®è¢«æ·¹æ²¡",
    "summary": "å˜‰ç„¶åˆ†äº«ç‹¬è‡ªçœ‹æ¼”å”±ä¼šçš„å°´å°¬ç»å†...",
    "cover_text_1": "ç«™èµ·ä¹Ÿè¢«æ·¹æ²¡",
    "cover_text_2": "è­¦å‘Šä¸€æ¬¡",
    "highlight_reason": "å˜‰ç„¶è‡ªå˜²èº«é«˜æ¢—ï¼ŒèŠ‚ç›®æ•ˆæœå¼ºçƒˆã€‚"
  }
]
```

#### ğŸ‘‰ æ“ä½œæµç¨‹

**æ–¹æ³•ä¸€ï¼šLLM æç¤ºè¯æ³• (prompt_method)**
1.  æ‰¾åˆ° `prompt_method` æ–‡ä»¶å¤¹ã€‚
2.  å°†**çº é”™åçš„å­—å¹•æ–‡ä»¶**ä½œä¸ºé™„ä»¶ï¼Œé…åˆå¯¹åº”çš„ Prompt å‘é€ç»™é«˜çº§å¤§æ¨¡å‹ï¼ˆæ¨è GPT-5, Claude 4.5, Gemini 3.0 Pro, è±†åŒ…ç­‰ï¼‰ã€‚
3.  å°†æ¨¡å‹ç”Ÿæˆçš„ JSON æ•°æ®å¤åˆ¶åˆ° `Data_source.txt`ã€‚

**æ–¹æ³•äºŒï¼šå¼¹å¹•çƒ­åº¦æ³• (danmu_method)**
1.  è·å–ç›´æ’­å¼¹å¹•ï¼š
    *   è¿è¡Œ `utils/get_danmu.py` ä¸‹è½½ã€‚
    *   æˆ–è€…ä½¿ç”¨å…¶ä»–æ–¹æ³•ï¼Œç”¨ç¬¬ä¸‰æ–¹å·¥å…·è½¬æ¢å¼¹å¹•æ ¼å¼ï¼ˆå¦‚ XML æ ¼å¼éœ€è½¬æ¢ä¸º ASS æ ¼å¼ï¼Œ[è½¬æ¢å·¥å…·](https://tiansh.github.io/us-danmaku/bilibili/)ï¼‰ã€‚
2.  å°† `ç›´æ’­å¼¹å¹•.ass` å’Œ `å­—å¹•.srt` æ”¾å…¥è§†é¢‘åŒçº§ç›®å½•ã€‚
3.  é…ç½®å¹¶è¿è¡Œ `danmu_method/get_data_by_danmu.py`ï¼Œç¨‹åºå°†è‡ªåŠ¨å¡«å…… `Data_source.txt`ã€‚

 
> **ğŸ’¡ è¿›é˜¶æŠ€å·§ï¼šå®˜æ–¹å¼¹å¹• + éå®˜æ–¹è§†é¢‘**
> å¦‚æœä½ æƒ³åˆ©ç”¨å®˜æ–¹å½•æ’­çš„å¼¹å¹•çƒ­åº¦æ•°æ®ï¼Œæ¥å‰ªè¾‘éå®˜æ–¹å½•æ’­çš„è§†é¢‘ï¼ˆé€šå¸¸å­˜åœ¨æ—¶é—´åå·®ï¼‰ï¼Œè¯·åœ¨ç”Ÿæˆæ•°æ®åé¢å¤–æ‰§è¡Œä¸€æ­¥ï¼š
>
> è¿è¡Œè„šæœ¬ï¼š`utils/edit_data_source_timestep.py`
>
> **ä½œç”¨**ï¼šè¯¥è„šæœ¬ä¼šè‡ªåŠ¨ä¿®æ­£ `Data_source.txt` ä¸­çš„æ—¶é—´æˆ³ï¼Œå°†å…¶ä»å®˜æ–¹å½•æ’­æ—¶é—´å¯¹é½åˆ°ä½ ä¸‹è½½çš„éå®˜æ–¹è§†é¢‘æ—¶é—´è½´ã€‚

---

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œä¸»ç¨‹åº

1.  æ‰“å¼€ `Auto_clip.py`ï¼Œæ ¹æ®æ³¨é‡Šå¡«å†™ç›¸å…³æ–‡ä»¶è·¯å¾„é…ç½®ã€‚
2.  è¿è¡Œç¨‹åºã€‚
3.  ç­‰å¾…è¾“å‡ºæ–‡ä»¶å¤¹ä¸­ç”Ÿæˆåˆ‡ç‰‡è§†é¢‘ã€åˆ‡ç‰‡å°é¢ (10ä¸ªåˆ‡ç‰‡å¤§çº¦è€—æ—¶2åˆ†é’Ÿ)ã€‚

> **æç¤º**ï¼šå¦‚æœå¯¹ç»“æœä¸æ»¡æ„ï¼Œå¯æ‰‹åŠ¨å¾®è°ƒ `Data_source.txt` ä¸­çš„æ ‡é¢˜æˆ–å°é¢å†…å®¹ï¼Œå†æ¬¡è¿è¡Œè„šæœ¬å³å¯ã€‚

---

## ğŸ”— ä¼ é€é—¨ (Resources)

ä¸ºäº†æ–¹ä¾¿è·å–ç´ æï¼Œè¿™é‡Œæ•´ç†äº†å¸¸ç”¨é“¾æ¥ï¼š

### å®˜æ–¹å½•æ’­æº
*   [å˜‰ç„¶ (Diana)](https://space.bilibili.com/672328094/lists/222940?type=series)
*   [è´æ‹‰ (Bella)](https://space.bilibili.com/672353429/lists/222938?type=series)
*   [ä¹ƒç³ (Eileen)](https://space.bilibili.com/672342685/lists/222754?type=series)
*   [å¿ƒå®œ (fiona)](https://space.bilibili.com/3537115310721181/lists/3698069?type=series)
*   [æ€è¯º (gladys)](https://space.bilibili.com/3537115310721781/lists/3692011?type=series)

### éå®˜æ–¹å½•æ’­
*   [A-SOULäºŒåˆ›è®¡ç”»](https://space.bilibili.com/547510303/upload/video)
*   [å¥¶æ·‡ç³å‘¨æŠ¥](https://space.bilibili.com/1729236416/upload/video) | [è´ææ˜Ÿå‘¨æŠ¥](https://space.bilibili.com/2114847153/upload/video) | [å˜‰å¿ƒç³–å‘¨æŠ¥](https://space.bilibili.com/247210788/upload/video)
*   [åœ°æµ·è è](https://space.bilibili.com/165364/upload/video) | [å¤©ç¥ç™½å¨…](https://space.bilibili.com/12416994/upload/video)

---


## âš ï¸ å…è´£å£°æ˜ (Disclaimer)

1.  æœ¬é¡¹ç›®ä¸ºç²‰ä¸è‡ªåˆ¶å¼€æºå·¥å…·ï¼Œ**é A-SOUL å®˜æ–¹é¡¹ç›®**ã€‚
2.  ç”Ÿæˆçš„è§†é¢‘ç´ æç‰ˆæƒå½’ **A-SOUL** æ‰€æœ‰ã€‚
3.  è¯·åœ¨ä½¿ç”¨æœ¬å·¥å…·è¿›è¡ŒäºŒåˆ›æŠ•ç¨¿æ—¶ï¼Œéµå®ˆ Bilibili ç¤¾åŒºè§„èŒƒåŠ A-SOUL äºŒåˆ›å…¬çº¦ã€‚
4.  æœ¬é¡¹ç›®ç¦æ­¢ç”¨äºä»»ä½•å•†ä¸šç›ˆåˆ©ç›®çš„ã€‚

---

## ğŸ¤ è´¡çŒ®ä¸æ”¯æŒ

æ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼
å¦‚æœè¿™ä¸ªé¡¹ç›®å¸®åˆ°äº†ä½ ï¼Œè¯·ç»™ä¸€ä¸ª Star â­ï¸ é¼“åŠ±ä¸€ä¸‹ï¼

---
## ğŸ‘¤ ä½œè€…
**æ•‘ä¸€äººä¸ºä¾ **  
Bilibili: [ç‚¹å‡»ä¸»é¡µ](https://space.bilibili.com/667041249)